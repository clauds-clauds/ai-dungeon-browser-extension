<div id="character-editor-panel">
    <div id="character-list-view">
        <div class="view-header">
            <h3>Characters</h3>
            <div class="search-container">
                <input type="search" id="char-search-input" placeholder="Search characters..." autocomplete="off">
            </div>
            
            <div class="header-button-group">
                <button id="show-add-form-btn" class="header-action-btn" title="Add New Character">
                    <span class="material-symbols-rounded">library_add</span>
                </button>
                <button id="character-list-back-to-menu-btn" class="header-action-btn" title="Return to Menu">
                    <span class="material-symbols-rounded">widgets</span>
                </button>
            </div>
        </div>
        <ul id="character-list"></ul>
    </div>

    <div id="character-form-view" style="display: none;">
        <div class="view-header">
            <h3 id="form-title">Add Character</h3>
            <div class="header-button-group">
                <button id="back-to-list-btn" class="header-action-btn" title="Back to List">
                    <span class="material-symbols-rounded">arrow_top_left</span>
                </button>
                <button id="character-form-back-to-menu-btn" class="header-action-btn" title="Return to Menu">
                    <span class="material-symbols-rounded">widgets</span>
                </button>
            </div>
        </div>
        <form id="character-form">
            <label>Portraits</label>
            <div id="portrait-hub">
                <div id="portrait-list-container">
                    <ul id="portrait-list-editor"></ul>
                </div>
                <button type="button" id="add-new-portrait-btn" title="Add New Portrait Slot">
                    <span class="material-symbols-rounded">add</span> Add Portrait
                </button>
            </div>
            
            <template id="portrait-editor-template">
                <li class="portrait-editor-item">
                    <div class="portrait-card">
                        <div class="portrait-card-icon">
                            <img src="" alt="Icon">
                            <input type="file" class="icon-file-input" accept="image/*" style="display:none;">
                        </div>
                        <div class="portrait-card-full">
                            <img src="" alt="Portrait Preview">
                            <input type="file" class="full-file-input" accept="image/*" style="display:none;">
                        </div>
                    </div>
                    <div class="portrait-card-actions">
                        <button type="button" class="set-active-portrait-btn" title="Set as Active Portrait">
                            <span class="material-symbols-rounded">push_pin</span>
                        </button>
                        <button type="button" class="delete-portrait-btn" title="Delete Portrait">
                            <span class="material-symbols-rounded">delete</span>
                        </button>
                        <span class="drag-handle material-symbols-rounded">drag_indicator</span>
                    </div>
                </li>
            </template>

            <label for="char-name">Name</label>
            <input type="text" id="char-name" autocomplete="off" required>

            <label for="char-nicknames">Nicknames (comma-separated)</label>
            <input type="text" id="char-nicknames" autocomplete="off">

            <div class="form-row">
                <div>
                    <label for="char-color">Color</label>
                    <input type="color" id="char-color" value="#c8aa64">
                </div>
                <div>
                    <label for="char-color-mode">Color Mode</label>
                    <select id="char-color-mode">
                        <option value="shared">Shared</option>
                        <option value="special">Special</option>
                    </select>
                </div>
                <div>
                    <label for="char-pick-mode">Pick Mode</label>
                    <select id="char-pick-mode">
                        <option value="trigger">Trigger</option>
                        <option value="action">Action</option>
                    </select>
                </div>
            </div>

            <div class="form-actions">
                <button type="button" id="delete-char-btn" class="generic-action-btn" title="Delete Character">
                    <span id="evil" class="material-symbols-rounded">delete</span>
                </button>
                <button type="submit" id="save-char-btn" class="generic-action-btn" title="Save Character">
                    <span class="material-symbols-rounded">save</span>
                </button>
            </div>
        </form>
    </div>
</div>